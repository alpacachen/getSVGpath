!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);const s=function(t,e,i){let s,n=null;return function(){let o=this,h=arguments,a=+new Date;clearTimeout(n),s||(s=a),a-s>=i?(t.apply(o,h),s=a):n=setTimeout(function(){t.apply(o,h)},e)}},n=(t=[],e=1)=>{let i="";return t.forEach((t,s)=>{let n="L";0===s&&(n="M"),t[2]&&(n=`Q${t[2][0]*e} ${t[2][1]*e}`),i+=`${n} ${t[0]*e} ${t[1]*e} `}),i};var o=class{constructor(t){this.x=t.x,this.y=t.y,this.lineWidth=t.lineWidth,this.width=t.width,this.height=t.height,this.opacity=t.opacity||.4,this.path=t.default&&t.default.data||[],this.onSure=t.onSure,this.canvas=null,this.ctx=null,this.div=null,this.mode=t.default&&t.default.mode||"free"}draw(){this.render(),"free"===this.mode?this.mode_free():"line"===this.mode&&this.mode_line()}render(){this.div=document.createElement("div"),this.div.innerHTML=`\n            <div id='SVGpath_wrap' style="position:absolute;top:${this.y}px;left:${this.x}px;width:${this.width}px;height:${this.height}px;background: rgba(0,0,0,${this.opacity});z-index: 1;">\n                <canvas id="SVGpath_Canvas" width=${this.width} height=${this.height}></canvas>\n                <div style="font-size:16px;padding: 4px;background: rgba(0,0,0,.4);border-radius: 4px;position: absolute;top: 10px;width: 95%;box-sizing: border-box;left: 0;right: 0;margin: auto;display: flex;justify-content: space-between;">\n                    <div id="optioncon" style="color:#FFFFFF">\n                        <input id="SVGpath_free" style="margin:0 4px;" type="radio" name="mode" value="free" ${"free"===this.mode?"checked":""} />free  \n                        <input id="SVGpath_line" style="margin:0 4px;" type="radio" name="mode" value="line" ${"line"===this.mode?"checked":""} />line\n                    </div>\n                    <div>\n                        <button style="border-radius:4px;border:0;color:#B2B2B2;background:rgba(0,0,0,.6);" id="SVGpath_cancel">cancel</button>\n                        <button style="border-radius:4px;border:0;color:#B2B2B2;background:rgba(0,0,0,.6);" id="SVGpath_sure">sure</button>\n                    </div>\n                </div>\n            </div>\n        `,document.body.appendChild(this.div),this.canvas=document.getElementById("SVGpath_Canvas"),this.ctx=this.canvas.getContext("2d"),document.getElementById("SVGpath_sure").onclick=(()=>{this.onSure({data:this.path,baseWidth:this.width,mode:this.mode}),document.body.removeChild(this.div)}),document.getElementById("SVGpath_cancel").onclick=(()=>{document.body.removeChild(this.div)}),document.getElementById("SVGpath_free").onclick=(()=>{this.cmode("free"),this.clear(),this.mode_free()}),document.getElementById("SVGpath_line").onclick=(()=>{this.cmode("line"),this.clear(),this.mode_line()})}mode_line(){let t=null,e=null;this.ctx.lineWidth=3;const i=(t,e)=>{let i={};return this.path.forEach((s,n)=>{let o=s[0],h=s[1];if(t<o+15&&t>o-15&&e<h+15&&e>h-15)i={index:n,type:"e"};else if(s[2]){const o=s[2][0],h=s[2][1];t<o+15&&t>o-15&&e<h+15&&e>h-15&&(i={index:n,type:"q"})}}),i},s=t=>{i(t.offsetX,t.offsetY).index?document.body.style.cursor="pointer":document.body.style.cursor="",null!==e&&(this.path[e][0]=t.offsetX,this.path[e][1]=t.offsetY,o())},n=e=>{i(e.offsetX,e.offsetY).index?document.body.style.cursor="pointer":document.body.style.cursor="",null!==t&&(this.path[t][2]=[e.offsetX,e.offsetY],o())},o=()=>{this.ctx.clearRect(0,0,this.width,this.height),this.ctx.beginPath();for(let t=0;t<this.path.length;t++)if(this.add_arc(this.path[t][0],this.path[t][1],5,0,2*Math.PI,!1,"orange"),this.ctx.moveTo(this.path[t][0],this.path[t][1]),this.ctx.save(),this.path[t+1]){let e=this.path[t+1][2][0],i=this.path[t+1][2][1];this.ctx.quadraticCurveTo(e,i,this.path[t+1][0],this.path[t+1][1]),this.ctx.stroke(),this.ctx.restore(),this.add_arc(e,i,5,0,2*Math.PI,!1,"gray"),this.ctx.setLineDash([2,2]),this.add_line(e,i,this.path[t][0],this.path[t][1]),this.add_line(e,i,this.path[t+1][0],this.path[t+1][1]),this.ctx.setLineDash([])}};o(),this.canvas.onmousedown=(h=>{const a=i(h.offsetX,h.offsetY);if("q"===a.type)return t=a.index,void(this.canvas.onmousemove=n);if("e"===a.type)return e=a.index,void(this.canvas.onmousemove=s);if(this.path.push([h.offsetX,h.offsetY]),this.path.length>1){let t=this.path.length,e=(h.offsetX+this.path[t-2][0])/2,i=(h.offsetY+this.path[t-2][1])/2;this.path[t-1].push([e,i])}o()}),this.canvas.onmousemove=null,this.canvas.onmouseup=(()=>{t=null,e=null}),this.canvas.mouseout=(()=>{t=null,e=null})}mode_free(){document.body.style.cursor="crosshair";let t=!1;this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.lineWidth=this.lineWidth||3;const e=()=>{this.ctx.beginPath();for(let t=0;t<this.path.length;t++)this.ctx.lineTo(this.path[t][0],this.path[t][1]);this.ctx.stroke()};this.ctx.strokeStyle="#ffffff",this.canvas.onmousedown=(e=>{t=!0,this.path.push([e.offsetX,e.offsetY])}),this.canvas.onmousemove=s(i=>{t&&(this.path.push([i.offsetX,i.offsetY]),this.ctx.clearRect(0,0,this.width,this.height),e())},50,60),this.canvas.onmouseup=(()=>t=!1),this.canvas.mouseout=(()=>t=!1),e()}add_arc(t,e,i,s,n,o,h){this.ctx.beginPath(),this.ctx.fillStyle=h,this.ctx.arc(t,e,i,s,n,o),this.ctx.fill(),this.ctx.lineWidth=1,this.ctx.stroke()}add_line(t,e,i,s){this.ctx.beginPath(),this.ctx.strokeStyle="#ffffff",this.ctx.moveTo(t,e),this.ctx.lineTo(i,s),this.ctx.stroke()}clear(){this.path=[],this.ctx.clearRect(0,0,this.width,this.height),this.canvas.onmousedown=null,this.canvas.onmousemove=null,this.canvas.onmouseup=null,this.canvas.mouseout=null}cmode(t){this.mode=t,document.body.style.cursor="free"===t?"crosshair":""}close(){try{document.body.removeChild(this.div),document.body.style.cursor=""}catch(t){console.warn("是不是已经关闭了？")}}};const{x:h,y:a,width:d,height:r}=document.getElementById("inner").getBoundingClientRect();let c=new o({x:h,y:a,width:d,height:r,opacity:.5,lineWidth:3,onSure:function(t){console.log(t),console.log(n(t.data)),document.getElementById("data").innerHTML=n(t.data)}});document.getElementById("start").onclick=(()=>c.draw())}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vdGVzdC9pbmRleC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInRocm90dGxlIiwiZm4iLCJkZWxheSIsIm11c3RSdW5EZWxheSIsInRfc3RhcnQiLCJ0aW1lciIsImNvbnRleHQiLCJ0aGlzIiwiYXJncyIsImFyZ3VtZW50cyIsInRfY3VyciIsIkRhdGUiLCJjbGVhclRpbWVvdXQiLCJhcHBseSIsInNldFRpbWVvdXQiLCJwYXRoMnN0cmluZyIsImFycmF5IiwicmF0aW8iLCJzdHIiLCJmb3JFYWNoIiwiaXRlbSIsImluZGV4IiwiY2hyIiwiW29iamVjdCBPYmplY3RdIiwib3B0IiwieCIsInkiLCJsaW5lV2lkdGgiLCJ3aWR0aCIsImhlaWdodCIsIm9wYWNpdHkiLCJwYXRoIiwiZGVmYXVsdCIsImRhdGEiLCJvblN1cmUiLCJjYW52YXMiLCJjdHgiLCJkaXYiLCJyZW5kZXIiLCJtb2RlX2ZyZWUiLCJtb2RlX2xpbmUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJvbmNsaWNrIiwiYmFzZVdpZHRoIiwicmVtb3ZlQ2hpbGQiLCJjbW9kZSIsImNsZWFyIiwiaXNEcmF3aW5nX2lkeCIsImlzRHJhd2luZ19lX2lkeCIsImZpbmRJZHgiLCJpZHgiLCJ0eCIsInR5IiwidHlwZSIsIml4IiwiaXkiLCJtb3ZlX2UiLCJlIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJzdHlsZSIsImN1cnNvciIsImRyYXdfbGluZXMiLCJtb3ZlX3EiLCJjbGVhclJlY3QiLCJiZWdpblBhdGgiLCJsZW5ndGgiLCJhZGRfYXJjIiwiTWF0aCIsIlBJIiwibW92ZVRvIiwic2F2ZSIsInF4IiwicXkiLCJxdWFkcmF0aWNDdXJ2ZVRvIiwic3Ryb2tlIiwicmVzdG9yZSIsInNldExpbmVEYXNoIiwiYWRkX2xpbmUiLCJvbm1vdXNlZG93biIsIm9ubW91c2Vtb3ZlIiwicHVzaCIsImxlbiIsIm9ubW91c2V1cCIsIm1vdXNlb3V0IiwiaXNEcmF3aW5nIiwibGluZUNhcCIsImxpbmVKb2luIiwiZHJhd0xpbmUiLCJsaW5lVG8iLCJzdHJva2VTdHlsZSIsInNhIiwiZWEiLCJjb3VudGVyY2xvY2t3aXNlIiwiY29sb3IiLCJmaWxsU3R5bGUiLCJhcmMiLCJmaWxsIiwic3giLCJzeSIsImV4IiwiZXkiLCJjb25zb2xlIiwid2FybiIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInN2ZyIsInJlcyIsImxvZyIsImRyYXciXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUs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LEVBQ0FPLE9BQUEsU0FBQThFLEdBQ0FKLFFBQUFLLElBQUFELEdBQ0FKLFFBQUFLLElBQW9CbEcsRUFBV2lHLEVBQUEvRSxPQUMvQlEsU0FBQUssZUFBQSxRQUFBSCxVQUFvRDVCLEVBQVdpRyxFQUFBL0UsU0FHL0RRLFNBQUFLLGVBQUEsU0FBQUUsUUFBQSxLQUFBK0QsRUFBQUciLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImNsYXNzIFNWR3BhdGgge1xuICAgIGNvbnN0cnVjdG9yKG9wdCkge1xuICAgICAgICB0aGlzLnggPSBvcHQueDtcbiAgICAgICAgdGhpcy55ID0gb3B0Lnk7XG4gICAgICAgIHRoaXMubGluZVdpZHRoID0gb3B0LmxpbmVXaWR0aDtcbiAgICAgICAgdGhpcy53aWR0aCA9IG9wdC53aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBvcHQuaGVpZ2h0O1xuICAgICAgICB0aGlzLm9wYWNpdHkgPSBvcHQub3BhY2l0eSB8fCAwLjQ7XG4gICAgICAgIHRoaXMucGF0aCA9IChvcHQuZGVmYXVsdCAmJiBvcHQuZGVmYXVsdC5kYXRhKSB8fCBbXTtcbiAgICAgICAgdGhpcy5vblN1cmUgPSBvcHQub25TdXJlO1xuICAgICAgICB0aGlzLmNhbnZhcyA9IG51bGw7XG4gICAgICAgIHRoaXMuY3R4ID0gbnVsbDtcbiAgICAgICAgdGhpcy5kaXYgPSBudWxsO1xuICAgICAgICB0aGlzLm1vZGUgPSAob3B0LmRlZmF1bHQgJiYgb3B0LmRlZmF1bHQubW9kZSkgfHwgJ2ZyZWUnO1xuICAgIH1cbiAgICBkcmF3KCkge1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICBpZiAodGhpcy5tb2RlID09PSAnZnJlZScpIHtcbiAgICAgICAgICAgIHRoaXMubW9kZV9mcmVlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlID09PSAnbGluZScpIHtcbiAgICAgICAgICAgIHRoaXMubW9kZV9saW5lKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICB0aGlzLmRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLmRpdi5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8ZGl2IGlkPSdTVkdwYXRoX3dyYXAnIHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7dG9wOiR7dGhpcy55fXB4O2xlZnQ6JHt0aGlzLnh9cHg7d2lkdGg6JHt0aGlzLndpZHRofXB4O2hlaWdodDoke1xuICAgICAgICAgICAgdGhpcy5oZWlnaHRcbiAgICAgICAgICAgIH1weDtiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLCR7dGhpcy5vcGFjaXR5fSk7ei1pbmRleDogMTtcIj5cbiAgICAgICAgICAgICAgICA8Y2FudmFzIGlkPVwiU1ZHcGF0aF9DYW52YXNcIiB3aWR0aD0ke3RoaXMud2lkdGh9IGhlaWdodD0ke3RoaXMuaGVpZ2h0fT48L2NhbnZhcz5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1zaXplOjE2cHg7cGFkZGluZzogNHB4O2JhY2tncm91bmQ6IHJnYmEoMCwwLDAsLjQpO2JvcmRlci1yYWRpdXM6IDRweDtwb3NpdGlvbjogYWJzb2x1dGU7dG9wOiAxMHB4O3dpZHRoOiA5NSU7Ym94LXNpemluZzogYm9yZGVyLWJveDtsZWZ0OiAwO3JpZ2h0OiAwO21hcmdpbjogYXV0bztkaXNwbGF5OiBmbGV4O2p1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cIm9wdGlvbmNvblwiIHN0eWxlPVwiY29sb3I6I0ZGRkZGRlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPVwiU1ZHcGF0aF9mcmVlXCIgc3R5bGU9XCJtYXJnaW46MCA0cHg7XCIgdHlwZT1cInJhZGlvXCIgbmFtZT1cIm1vZGVcIiB2YWx1ZT1cImZyZWVcIiAke3RoaXMubW9kZSA9PT0gJ2ZyZWUnID8gJ2NoZWNrZWQnIDogJyd9IC8+ZnJlZSAgXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJTVkdwYXRoX2xpbmVcIiBzdHlsZT1cIm1hcmdpbjowIDRweDtcIiB0eXBlPVwicmFkaW9cIiBuYW1lPVwibW9kZVwiIHZhbHVlPVwibGluZVwiICR7dGhpcy5tb2RlID09PSAnbGluZScgPyAnY2hlY2tlZCcgOiAnJ30gLz5saW5lXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBzdHlsZT1cImJvcmRlci1yYWRpdXM6NHB4O2JvcmRlcjowO2NvbG9yOiNCMkIyQjI7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC42KTtcIiBpZD1cIlNWR3BhdGhfY2FuY2VsXCI+Y2FuY2VsPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHN0eWxlPVwiYm9yZGVyLXJhZGl1czo0cHg7Ym9yZGVyOjA7Y29sb3I6I0IyQjJCMjtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjYpO1wiIGlkPVwiU1ZHcGF0aF9zdXJlXCI+c3VyZTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZGl2KTtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnU1ZHcGF0aF9DYW52YXMnKTtcbiAgICAgICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnU1ZHcGF0aF9zdXJlJykub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25TdXJlKHsgZGF0YTogdGhpcy5wYXRoLCBiYXNlV2lkdGg6IHRoaXMud2lkdGgsIG1vZGU6IHRoaXMubW9kZSB9KTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5kaXYpO1xuICAgICAgICB9O1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnU1ZHcGF0aF9jYW5jZWwnKS5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLmRpdik7XG4gICAgICAgIH07XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdTVkdwYXRoX2ZyZWUnKS5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbW9kZSgnZnJlZScpO1xuICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5tb2RlX2ZyZWUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ1NWR3BhdGhfbGluZScpLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNtb2RlKCdsaW5lJyk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLm1vZGVfbGluZSgpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBtb2RlX2xpbmUoKSB7XG4gICAgICAgIC8vIHHkuK3ngrkgICBl6LW354K5XG4gICAgICAgIGxldCBpc0RyYXdpbmdfaWR4ID0gbnVsbDtcbiAgICAgICAgbGV0IGlzRHJhd2luZ19lX2lkeCA9IG51bGxcbiAgICAgICAgdGhpcy5jdHgubGluZVdpZHRoID0gMztcbiAgICAgICAgY29uc3QgZmluZElkeCA9ICh4LCB5KSA9PiB7XG4gICAgICAgICAgICBsZXQgaWR4ID0ge307XG4gICAgICAgICAgICB0aGlzLnBhdGguZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdHggPSBpdGVtWzBdXG4gICAgICAgICAgICAgICAgbGV0IHR5ID0gaXRlbVsxXVxuICAgICAgICAgICAgICAgIGlmICh4IDwgdHggKyAxNSAmJiB4ID4gdHggLSAxNSAmJiB5IDwgdHkgKyAxNSAmJiB5ID4gdHkgLSAxNSkge1xuICAgICAgICAgICAgICAgICAgICBpZHggPSB7IGluZGV4LCB0eXBlOiAnZScgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpeCA9IGl0ZW1bMl1bMF07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGl5ID0gaXRlbVsyXVsxXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPCBpeCArIDE1ICYmIHggPiBpeCAtIDE1ICYmIHkgPCBpeSArIDE1ICYmIHkgPiBpeSAtIDE1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZHggPSB7IGluZGV4LCB0eXBlOiAncScgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gaWR4O1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBtb3ZlX2UgPSBlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlkeCA9IGZpbmRJZHgoZS5vZmZzZXRYLCBlLm9mZnNldFkpOyAvLyDliKTmlq3pvKDmoIflnKjlk6rngrnkuIpcbiAgICAgICAgICAgIGlmIChpZHguaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0RyYXdpbmdfZV9pZHggIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhdGhbaXNEcmF3aW5nX2VfaWR4XVswXSA9IGUub2Zmc2V0WFxuICAgICAgICAgICAgICAgIHRoaXMucGF0aFtpc0RyYXdpbmdfZV9pZHhdWzFdID0gZS5vZmZzZXRZXG4gICAgICAgICAgICAgICAgZHJhd19saW5lcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1vdmVfcSA9IGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaWR4ID0gZmluZElkeChlLm9mZnNldFgsIGUub2Zmc2V0WSk7IC8vIOWIpOaWrem8oOagh+WcqOWTqueCueS4ilxuICAgICAgICAgICAgaWYgKGlkeC5pbmRleCkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRHJhd2luZ19pZHggIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhdGhbaXNEcmF3aW5nX2lkeF1bMl0gPSBbZS5vZmZzZXRYLCBlLm9mZnNldFldXG4gICAgICAgICAgICAgICAgZHJhd19saW5lcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRyYXdfbGluZXMgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGF0aC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIC8v5Y6f54K5XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRfYXJjKHRoaXMucGF0aFtpXVswXSwgdGhpcy5wYXRoW2ldWzFdLCA1LCAwLCAyICogTWF0aC5QSSwgZmFsc2UsICdvcmFuZ2UnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5tb3ZlVG8odGhpcy5wYXRoW2ldWzBdLCB0aGlzLnBhdGhbaV1bMV0pO1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4LnNhdmUoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXRoW2kgKyAxXSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcXggPSB0aGlzLnBhdGhbaSArIDFdWzJdWzBdO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcXkgPSB0aGlzLnBhdGhbaSArIDFdWzJdWzFdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5xdWFkcmF0aWNDdXJ2ZVRvKHF4LCBxeSwgdGhpcy5wYXRoW2kgKyAxXVswXSwgdGhpcy5wYXRoW2kgKyAxXVsxXSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuICAgICAgICAgICAgICAgICAgICAvL+S4reeCuVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5yZXN0b3JlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkX2FyYyhxeCwgcXksIDUsIDAsIDIgKiBNYXRoLlBJLCBmYWxzZSwgJ2dyYXknKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguc2V0TGluZURhc2goWzIsIDJdKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRfbGluZShxeCwgcXksIHRoaXMucGF0aFtpXVswXSwgdGhpcy5wYXRoW2ldWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRfbGluZShxeCwgcXksIHRoaXMucGF0aFtpICsgMV1bMF0sIHRoaXMucGF0aFtpICsgMV1bMV0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5zZXRMaW5lRGFzaChbXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRyYXdfbGluZXMoKTtcbiAgICAgICAgdGhpcy5jYW52YXMub25tb3VzZWRvd24gPSBlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlkeCA9IGZpbmRJZHgoZS5vZmZzZXRYLCBlLm9mZnNldFkpO1xuICAgICAgICAgICAgaWYgKGlkeC50eXBlID09PSAncScpIHtcbiAgICAgICAgICAgICAgICBpc0RyYXdpbmdfaWR4ID0gaWR4LmluZGV4O1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLm9ubW91c2Vtb3ZlID0gbW92ZV9xXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlkeC50eXBlID09PSAnZScpIHtcbiAgICAgICAgICAgICAgICBpc0RyYXdpbmdfZV9pZHggPSBpZHguaW5kZXg7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMub25tb3VzZW1vdmUgPSBtb3ZlX2VcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhdGgucHVzaChbZS5vZmZzZXRYLCBlLm9mZnNldFldKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhdGgubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGxldCBsZW4gPSB0aGlzLnBhdGgubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGxldCBxeCA9IChlLm9mZnNldFggKyB0aGlzLnBhdGhbbGVuIC0gMl1bMF0pIC8gMjtcbiAgICAgICAgICAgICAgICBsZXQgcXkgPSAoZS5vZmZzZXRZICsgdGhpcy5wYXRoW2xlbiAtIDJdWzFdKSAvIDI7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXRoW2xlbiAtIDFdLnB1c2goW3F4LCBxeV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZHJhd19saW5lcygpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNhbnZhcy5vbm1vdXNlbW92ZSA9IG51bGxcbiAgICAgICAgdGhpcy5jYW52YXMub25tb3VzZXVwID0gKCkgPT4geyBpc0RyYXdpbmdfaWR4ID0gbnVsbDsgaXNEcmF3aW5nX2VfaWR4ID0gbnVsbCB9O1xuICAgICAgICB0aGlzLmNhbnZhcy5tb3VzZW91dCA9ICgpID0+IHsgaXNEcmF3aW5nX2lkeCA9IG51bGw7IGlzRHJhd2luZ19lX2lkeCA9IG51bGwgfTtcbiAgICB9XG4gICAgbW9kZV9mcmVlKCkge1xuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICdjcm9zc2hhaXInO1xuICAgICAgICBsZXQgaXNEcmF3aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVDYXAgPSAncm91bmQnO1xuICAgICAgICB0aGlzLmN0eC5saW5lSm9pbiA9ICdyb3VuZCc7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IHRoaXMubGluZVdpZHRoIHx8IDM7XG4gICAgICAgIGNvbnN0IGRyYXdMaW5lID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGF0aC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVUbyh0aGlzLnBhdGhbaV1bMF0sIHRoaXMucGF0aFtpXVsxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSAnI2ZmZmZmZic7XG4gICAgICAgIHRoaXMuY2FudmFzLm9ubW91c2Vkb3duID0gZSA9PiB7XG4gICAgICAgICAgICBpc0RyYXdpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wYXRoLnB1c2goW2Uub2Zmc2V0WCwgZS5vZmZzZXRZXSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2FudmFzLm9ubW91c2Vtb3ZlID0gdGhyb3R0bGUoXG4gICAgICAgICAgICBlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzRHJhd2luZykgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHRoaXMucGF0aC5wdXNoKFtlLm9mZnNldFgsIGUub2Zmc2V0WV0pO1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgZHJhd0xpbmUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICA1MCxcbiAgICAgICAgICAgIDYwXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuY2FudmFzLm9ubW91c2V1cCA9ICgpID0+IChpc0RyYXdpbmcgPSBmYWxzZSk7XG4gICAgICAgIHRoaXMuY2FudmFzLm1vdXNlb3V0ID0gKCkgPT4gKGlzRHJhd2luZyA9IGZhbHNlKTtcbiAgICAgICAgZHJhd0xpbmUoKTtcbiAgICB9XG4gICAgYWRkX2FyYyh4LCB5LCByLCBzYSwgZWEsIGNvdW50ZXJjbG9ja3dpc2UsIGNvbG9yKSB7XG4gICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgdGhpcy5jdHguYXJjKHgsIHksIHIsIHNhLCBlYSwgY291bnRlcmNsb2Nrd2lzZSk7XG4gICAgICAgIHRoaXMuY3R4LmZpbGwoKTtcbiAgICAgICAgdGhpcy5jdHgubGluZVdpZHRoID0gMTtcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7XG4gICAgfVxuICAgIGFkZF9saW5lKHN4LCBzeSwgZXgsIGV5KSB7XG4gICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9ICcjZmZmZmZmJ1xuICAgICAgICB0aGlzLmN0eC5tb3ZlVG8oc3gsIHN5KTtcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKGV4LCBleSk7XG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuICAgIH1cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gW107XG4gICAgICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgICAgIHRoaXMuY2FudmFzLm9ubW91c2Vkb3duID0gbnVsbDtcbiAgICAgICAgdGhpcy5jYW52YXMub25tb3VzZW1vdmUgPSBudWxsO1xuICAgICAgICB0aGlzLmNhbnZhcy5vbm1vdXNldXAgPSBudWxsO1xuICAgICAgICB0aGlzLmNhbnZhcy5tb3VzZW91dCA9IG51bGw7XG4gICAgfVxuICAgIGNtb2RlKG1vZGUpIHtcbiAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcbiAgICAgICAgaWYgKG1vZGUgPT09ICdmcmVlJykge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnY3Jvc3NoYWlyJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJyc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuZGl2KTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gJyc7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybign5piv5LiN5piv5bey57uP5YWz6Zet5LqG77yfJyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8v6IqC5rWB5Ye95pWw77yM5q2k5aSE55So5p2l5b+r6YCf55S755u057q/XG5jb25zdCB0aHJvdHRsZSA9IGZ1bmN0aW9uIChmbiwgZGVsYXksIG11c3RSdW5EZWxheSkge1xuICAgIGxldCB0aW1lciA9IG51bGw7XG4gICAgbGV0IHRfc3RhcnQ7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IGNvbnRleHQgPSB0aGlzLFxuICAgICAgICAgICAgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgICAgIHRfY3VyciA9ICtuZXcgRGF0ZSgpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICBpZiAoIXRfc3RhcnQpIHtcbiAgICAgICAgICAgIHRfc3RhcnQgPSB0X2N1cnI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRfY3VyciAtIHRfc3RhcnQgPj0gbXVzdFJ1bkRlbGF5KSB7XG4gICAgICAgICAgICBmbi5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICAgIHRfc3RhcnQgPSB0X2N1cnI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGZuLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgICAgfSwgZGVsYXkpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5cbi8v5bCG5LqM57u05pWw57uE6L2sc3ZnIHBhdGjmoLzlvI9cbmNvbnN0IHBhdGgyc3RyaW5nID0gKGFycmF5ID0gW10sIHJhdGlvID0gMSkgPT4ge1xuICAgIGxldCBzdHIgPSAnJztcbiAgICBhcnJheS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICBsZXQgY2hyID0gJ0wnO1xuICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIGNociA9ICdNJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICAgICAgY2hyID0gYFEke2l0ZW1bMl1bMF0gKiByYXRpb30gJHtpdGVtWzJdWzFdICogcmF0aW99YDtcbiAgICAgICAgfVxuICAgICAgICBzdHIgKz0gYCR7Y2hyfSAke2l0ZW1bMF0gKiByYXRpb30gJHtpdGVtWzFdICogcmF0aW99IGA7XG4gICAgfSk7XG4gICAgcmV0dXJuIHN0cjtcbn07XG5leHBvcnQgZGVmYXVsdCBTVkdwYXRoO1xuZXhwb3J0IHsgcGF0aDJzdHJpbmcgfTtcbiIsImltcG9ydCBTVkdwYXRoLCB7IHBhdGgyc3RyaW5nIH0gZnJvbSAnLi4vaW5kZXgnXG5jb25zdCB7IHgsIHksIHdpZHRoLCBoZWlnaHQgfSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbm5lcicpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG5sZXQgc3ZnID0gbmV3IFNWR3BhdGgoe1xuICAgIHgsXG4gICAgeSxcbiAgICB3aWR0aCxcbiAgICBoZWlnaHQsXG4gICAgb3BhY2l0eTogMC41LFxuICAgIGxpbmVXaWR0aDogMyxcbiAgICBvblN1cmU6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICBjb25zb2xlLmxvZyhwYXRoMnN0cmluZyhyZXMuZGF0YSkpXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRhJykuaW5uZXJIVE1MID0gcGF0aDJzdHJpbmcocmVzLmRhdGEpXG4gICAgfVxufSlcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydCcpLm9uY2xpY2sgPSAoKSA9PiBzdmcuZHJhdygpIl0sInNvdXJjZVJvb3QiOiIifQ==